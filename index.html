<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <link href="https://fonts.google.com/specimen/Plus+Jakarta+Sans">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
  
  <title>Frontend Mentor | Mortgage repayment calculator</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet üëç -->
  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: hsl(228, 45%, 44%); }
    body{
      background-color: hsl(202, 86%, 94%);
      font-size: 16px;
      max-width: 1440px;
    }

    @media screen and (max-width: 375px) {
      body {
        max-width: 375px;
      }
    }

    .amountshow{
      border-top:2px solid hsl(61, 70%, 52%);
      background-color: hsl(202, 55%, 10%);
    }

    .displaybox{
      background-color: hsl(202, 55%, 16%);
    }

    .btn-cgreen{
      background-color: hsl(61, 70%, 52%);
      border: 1px solid hsl(61, 70%, 52%);
    }

    .lightblue{
      background-color: hsl(202, 86%, 94%);
    }

    .lightgreen{
      color: hsl(61, 70%, 52%);
    }

    .btn-cgreen:hover{
      background-color: hsl(60, 70%, 57%);
    }

    .main{
      border-radius: 15px;
    }

    .displayradius{
      border-radius: 0px 15px 15px 100px ;
    }
    
    .radiosalect:focus-within{
      background-color: hsl(61, 70%, 90%);
      border: 1px solid hsl(61, 70%, 52%) !important;
    }

    @media screen and (max-width: 768px) {
      .main{
        border-radius: 10px;
      }

      .displayradius{
        border-radius: 0px 0px 10px 10px;
      }
    }

    input[type="checkbox"],
    input[type="radio"] {
      accent-color: hsl(61, 70%, 52%); /* or any other color */
      border: 2px solid white;
      border-radius: 50%;
      width: 16px;
      height: 16px;
    }

    input[type="checkbox"],
    input[type="radio"]:focus-within {
      accent-color: hsl(61, 70%, 52%); /* or any other color */
      background-color: hsl(60, 70%, 57%);
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      border-radius: 50%;
      width: 16px;
      height: 16px;
    }

  </style>
</head>
<body class="position-absolute gap-3 p-3 mx-auto d-flex flex-column justify-content-center top-0 bottom-0 start-0 end-0 hstack h-100">
  <div class="col-md-8 mx-auto d-md-flex gap-2 bg-white main shadow-lg">
    <form id="myform" class="flex-1 w-100 p-4 ">
      <div class="d-flex justify-content-between mb-4">
        <h4>Mortgage Calculator</h4>
        <button type="button" class="btn p-0 border-0" id="clear">Clear All</button>
      </div>
      <div class="w-100 mb-3">
        <label>Mortgage Amount</label>
        <div class="w-100 position-relative">
          <span class="position-absolute lightblue hstack h-100 justify-content-center rounded-start-1" style="width: 40px;" aria-icon="amount">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-currency-pound" viewBox="0 0 16 16">
              <path d="M4 8.585h1.969c.115.465.186.939.186 1.43 0 1.385-.736 2.496-2.075 2.771V14H12v-1.24H6.492v-.129c.825-.525 1.135-1.446 1.135-2.694 0-.465-.07-.913-.168-1.352h3.29v-.972H7.22c-.186-.723-.372-1.455-.372-2.247 0-1.274 1.047-2.066 2.58-2.066a5.3 5.3 0 0 1 2.103.465V2.456A5.6 5.6 0 0 0 9.348 2C6.865 2 5.322 3.291 5.322 5.366c0 .775.195 1.515.399 2.247H4z"/>
            </svg>
          </span>
          <input type="text" class="w-100 form-control ps-5 bg-white" id="amount" name="amount" aria-input="amount"/> 
        </div>
        <span aria-error="amount"></span>
      </div>
      <div class="d-flex flex-lg-row flex-column gap-3 mb-3">
        <div >
          <label>Mortgage Term</label>
          <div class="position-relative w-100 d-flex">
            <input type="text" class="w-100 form-control" id="term" name="term" aria-input="term"/> 
            <span class="position-absolute lightblue end-0 hstack h-100 justify-content-center rounded-end-1" style="width: 60px;" aria-icon="term">
              years
            </span>
          </div>
          <span aria-error="term"></span>
        </div>
        <div >
          <label>Interest Rate</label>
          <div class="position-relative w-100 d-flex">
            <input type="text" class="w-100 form-control" id="rate" name="rate" aria-input="rate"/> 
            <span class="position-absolute lightblue end-0 hstack h-100 justify-content-center rounded-end-1" style="width: 40px;" aria-icon="rate">
              %
            </span>
          </div>
          <span aria-error="rate"></span>
        </div>
      </div>
      <div class="d-grid gap-2 mb-3">
        <label>Mortgage Type</label>
        <div class="border w-100 d-flex p-2 rounded gap-2 radiosalect hstack">
          <input type="radio" id="repayment" name="type" class="radioselect " value="repayments" radio-input="type"/> 
          <span>Repayment</span>
        </div>
        <div class="border w-100 d-flex p-2 rounded gap-2 radiosalect hstack">
          <input type="radio" id="interestOnly" name="type" class="radioselect" value="interest" radio-input="type"/> 
          <span>Interest Only</span>
        </div>
        <span radio-error="type"></span>
      </div>
      <button class="btn btn-cgreen d-flex gap-2 items-align-center rounded-5 px-4" type="submit" >
        <img width="20px" src="./assets/images/icon-calculator.svg"/>
        Calculate Repayments
      </button>
    </form>

    <div class="flex-1 w-100 d-flex hstack displaybox text-white displayradius">
        <div id="currentview" class="mx-auto w-100 text-center p-4">
          <img src="./assets/images/illustration-empty.svg" alt="Results show here">
          <h2 class="">Results shown here</h2>
          <p class="attribution">Complete the form and click ‚Äúcalculate repayments‚Äù to see what 
  your monthly repayments would be.</p>
        </div>
        <div id="calculatedDisplay" class="mx-auto d-none p-4 w-100 text-start">
          <h2 class="">Your results</h2>
          <p class="attribution text-start">Your results are shown below based on the information you provided. 
  To adjust the results, edit the form and click ‚Äúcalculate repayments‚Äù again.</p>
          <div class="rounded-2 p-4 amountshow">
            <p id="optionview" class="attribution text-start">Your monthly repayments</p>
            <h1 class="d-flex hstack lightgreen">
              <svg xmlns="http://www.w3.org/2000/svg" height="36" fill="currentColor" class="bi bi-currency-pound" viewBox="0 0 16 16">
                <path d="M4 8.585h1.969c.115.465.186.939.186 1.43 0 1.385-.736 2.496-2.075 2.771V14H12v-1.24H6.492v-.129c.825-.525 1.135-1.446 1.135-2.694 0-.465-.07-.913-.168-1.352h3.29v-.972H7.22c-.186-.723-.372-1.455-.372-2.247 0-1.274 1.047-2.066 2.58-2.066a5.3 5.3 0 0 1 2.103.465V2.456A5.6 5.6 0 0 0 9.348 2C6.865 2 5.322 3.291 5.322 5.366c0 .775.195 1.515.399 2.247H4z"/>
              </svg>
              <span id="monthly">1,797.74</span>
            </h1>
            <hr>
            <p class="attribution text-start">Total you'll repay over the term</p>
            <h5 class="d-flex hstack">
              <svg xmlns="http://www.w3.org/2000/svg" height="20" fill="currentColor" class="bi bi-currency-pound" viewBox="0 0 16 16">
                <path d="M4 8.585h1.969c.115.465.186.939.186 1.43 0 1.385-.736 2.496-2.075 2.771V14H12v-1.24H6.492v-.129c.825-.525 1.135-1.446 1.135-2.694 0-.465-.07-.913-.168-1.352h3.29v-.972H7.22c-.186-.723-.372-1.455-.372-2.247 0-1.274 1.047-2.066 2.58-2.066a5.3 5.3 0 0 1 2.103.465V2.456A5.6 5.6 0 0 0 9.348 2C6.865 2 5.322 3.291 5.322 5.366c0 .775.195 1.515.399 2.247H4z"/>
              </svg>
              <span id="totalOverTerm">539,322.94</span>
            </h5>
          </div>
        </div>
    </div>
  </div>
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge">Frontend Mentor</a>. 
    Coded by <a href="#">Faiz Alam</a>.
  </div>
  <script type="text/javascript">
    document.getElementById('myform').addEventListener('submit',(e)=>{
      e.preventDefault();
      const formData = new FormData(e.target);
      const selecOpt = document.querySelector('input[name="type"]:checked');
      if(!selecOpt){
        document.querySelector(`[radio-error='type']`).textContent = `This field is required`;
        document.querySelector(`[radio-error='type']`).classList.add('text-danger','fs-xs');
      }
      document.querySelector(`[radio-input='type']`).addEventListener('click',()=>{
        document.querySelector(`[radio-error='type']`).textContent = ``;
        document.querySelector(`[radio-error='type']`).classList.remove('text-danger','fs-xs');
      });
      // Convert to plain object (optional)
      const data = Object.fromEntries(formData.entries());
      Object.entries(data).forEach(element => {
        if(element[1] === ''){
          document.querySelector(`[aria-icon=${element[0]}]`).classList.add('bg-danger','text-white');
          document.querySelector(`[aria-input=${element[0]}]`).classList.add('border-danger');
          document.querySelector(`[aria-error=${element[0]}]`).textContent = `This field is required`;
          document.querySelector(`[aria-error=${element[0]}]`).classList.add('text-danger','fs-xs');
        };
      });
      
        if(data.amount && data.rate && data.term && selecOpt){
          const mr = (data.rate/100)/12;
          const n = data.term*12;
          const monthlyPayment = data.amount*(mr * Math.pow(1 + mr,n))/(Math.pow(1 + mr,n)-1); 
          const totalOverTerm = monthlyPayment*(data.term*12);
          const totalInterest = (totalOverTerm - data.amount)/n;
          
          if(selecOpt.value == 'repayments'){
            document.getElementById('optionview').textContent = `Your monthly ${selecOpt.value}`;
            document.getElementById('monthly').textContent = monthlyPayment.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          }else{
            document.getElementById('optionview').textContent = `Your monthly ${selecOpt.value}`;
            document.getElementById('monthly').textContent = totalInterest.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          }
          document.getElementById('totalOverTerm').textContent = totalOverTerm.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          document.getElementById('currentview').classList.add('d-none');
          document.getElementById('calculatedDisplay').classList.remove('d-none');
          // document.getElementById('myform').reset();
        }
      });

    document.querySelectorAll('[aria-input]').forEach(input => {
      ['click', 'focus'].forEach(event => {
        input.addEventListener(event, (e) => {
          const cname = e.target.getAttribute('aria-input');
          document.querySelector(`[aria-icon=${cname}]`)?.classList.remove('bg-danger', 'text-white');
          document.querySelector(`[aria-input=${cname}]`)?.classList.remove('border-danger');
          const errorElement = document.querySelector(`[aria-error=${cname}]`);
          if (errorElement) {
            errorElement.textContent = '';
            errorElement.classList.remove('text-danger');
          }
        });
      });
    });

    document.getElementById('clear').addEventListener('click',(e)=>{
      document.getElementById('myform').reset();
      document.getElementById('currentview').classList.remove('d-none');
      document.getElementById('calculatedDisplay').classList.add('d-none');
    });

    document.querySelectorAll('[type="text"]').forEach(input =>{
        input.addEventListener('keydown',(e)=>{
          const key = e.key;

          // Allow control keys like backspace, delete, arrow keys, tab, etc.
          if (
            key === "Backspace" || key === "Delete" || key === "ArrowLeft" ||
            key === "ArrowRight" || key === "Tab"
          ) {
            return;
          }

          // Block input if key is not a digit
          if (!/^\d$/.test(key)) e.preventDefault();
        });
    });
  </script>
</body>
</html>